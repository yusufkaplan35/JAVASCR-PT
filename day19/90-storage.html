<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <h2>Welcome to my app</h2>
    <p>You are visiting this app for <span id="counter">the first time</span></p>
    <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvas" aria-labelledby="offcanvasLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasLabel">Privacy Policy</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <p>We use essential cookies to make our site work. With your consent, we may also use non-essential cookies
                to
                improve user experience and analyze website traffic. By clicking "Accept", you agree to our website's
                cookie
                use as described in our Cookie Policy. You can change your cookie settings at any time by clicking
                "Preferences."</p>
            <button id="btnAccept" class="btn btn-info btn-sm">Accept</button>
            <button id="btnDecline" class="btn btn-danger btn-sm">Decline</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        /* COUNTER */
        let counter = Number(localStorage.getItem("counter")) ?? 0;
        counter++;
        localStorage.setItem("counter", counter);
        document.getElementById("counter").textContent = `${counter} times`;
        /* PRIVACY POLICY */
        const offcanvas = new bootstrap.Offcanvas('#offcanvas')
        const isPrivacySelected = Boolean(localStorage.getItem("privacy"));
        if (!isPrivacySelected) {
            offcanvas.show()
        }
        const setPrivacyPolicy = (e) => {
            const val = e.target.textContent.toLowerCase()
            localStorage.setItem("privacy", val)
            offcanvas.hide()
        }
        document.getElementById("btnAccept").addEventListener("click", setPrivacyPolicy)
        document.getElementById("btnDecline").addEventListener("click", setPrivacyPolicy)
    </script>
</body>
</html>